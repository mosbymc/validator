var validator=function(c){function y(a){a&&a.constructor===Array&&c.each(a,function(a,d){c(document).on(d,"input",function(a){var b=c(a.currentTarget),e=b.parents(".inputValidate:first");!(b.hasClass("inputValidate")||e&&0<e.length)||b.data("validateon")!==d&&("input"!==d||void 0!=b.data("validateon"))||e.data("excludeinputs")&&-1!==e.data("excludeinputs").indexOf(a.currentTarget.id)||(a=v(b,a),e=[],e.push(z(c(b))),null===e[0]&&1===e.length)||(k[a.time]={options:a,inputArray:e},A(a,e),w(b))})})}function B(a,
b){a.data("vts",b.time);b.button.prop("disabled",!0);if(!1!==b.callBefore){var d=[window].concat(b.callBefore.split(".")).reduce(function(a,b){return"function"===typeof a?a()[b]:a[b]});"function"===typeof d?d.call(a,r):r(!0,a,b)}else r(!0,a,b)}function r(a,b){var d=k[b.data("vts")].options;if(a){null!==d.groupErrors&&(c("#"+d.groupErrors).find(".errorSpan").remove(),c("#"+d.groupErrors).find("br").remove());for(var g=c(b).find("input, select"),f=[],e=0,h=g.length;e<h;e++){var t=z(c(g[e]));null!==
t&&(f=f.concat(t))}k[b.data("vts")].inputArray=f;A(d,f);w(b)}}function z(a){var b={};""!==a.data("required")||"text"!==a[0].type&&-1===a[0].type.indexOf("select")||(b["validator.validationRules.requiredInput"]="waiting");""!==a.data("required")||"radio"!==a[0].type&&"checkbox"!==a[0].type||(b["validator.validationRules.requiredGroup"]="waiting");a.data("min")&&(b["validator.validationRules.testMinValue"]="waiting");a.data("max")&&(b["validator.validationRules.testMaxValue"]="waiting");a.data("matchfield")&&
(b["validator.validationRules.verifyMatch"]="waiting");a.data("maxchecked")&&(b["validator.validationRules.maxChecked"]="waiting");a.data("minchecked")&&(b["validator.validationRules.minChecked"]="waiting");for(var d=(a.data("validationrules")||"").replace(/ /g,"").split(","),c=0;c<d.length;c++)""!==d[c]&&(b["validator.validationRules."+d[c]]="waiting");d=(a.data("customrules")||"").replace(/ /g,"").split(",");for(c=0;c<d.length;c++)""!==d[c]&&(b[d[c]]="waiting");return 0<Object.keys(b).length?{element:a,
rules:b}:null}function A(a,b){for(var d=0,c=b.length;d<c;d++){var f=b[d].element,e=performance.now().toString().split(".");D(f);m(f).removeClass("invalid");f.data("vts",a.time).data("vid",e[1]).attr("vts",a.time);var e=b[d].rules,h;for(h in e)b[d].failedRequired?x(f,h,null):(e=[window].concat(h.split(".")).reduce(function(a,b){return"function"===typeof a?a()[b]:a[b]}),"function"===typeof e?E(h,a.time,e,f,b[d]):x(f,h,null))}}function E(a,b,d,c,f){var e=F(a,b,d,c,function(a,b,d){e.done.call(e,{valid:a,
message:b,width:d})});"validator.validationRules.requiredInput"===e.functionName||"validator.validationRules.requiredGroup"===e.functionName?e.customFunction.call(c[0],f,e.validate):e.customFunction.call(c[0],e.validate)}function x(a,b,d){for(var c=a.data("vts"),f,e=0,h=k[c].inputArray.length;e<h;e++)if(f=k[c].inputArray[e],a.data("vid")===f.element.data("vid")){f.rules[b]=d;break}}function G(a){try{if(c(this.element).data("vts")===this.timeStamp){var b=this.element,d=k[this.timeStamp].options,g=
this.functionName;if(!a.valid){var f=C(b);H(b,a,d,g,f.width,f.height);if(d.group){if(0===c("#"+b.data("vid")+"InputGrp").length)a:{var e=m(b);switch(!1===b.hasClass("groupByInput")?b.parents(".formValidate:first").data("location")||"right":b.data("location")||"right"){case "right":e.after("<div id='"+b.data("vid")+"InputGrp' data-parentinput='"+b.data("vid")+"' class='hInputGroup alignInput'></div>");break a;case "left":e.before("<div id='"+b.data("vid")+"InputGrp' data-parentinput='"+b.data("vid")+
"' class='hInputGroup alignInput'></div>");break a;case "top":e.before("<div id='"+b.data("vid")+"InputGrp' data-parentinput='"+b.data("vid")+"' class='vInputGroup'></div>");break a;case "bottom":e.after("<div id='"+b.data("vid")+"InputGrp' data-parentinput='"+b.data("vid")+"' class='vInputGroup'></div>")}}var h=c("#"+b.data("vid")+"error"+g.replace(/(:|\.|\[|\]|,)/g,"\\$1")),t="<span class='inputGrpErrorSpan'>"+h.html()+"</span></br>";c("#"+b.data("vid")+"InputGrp").append(t);h.remove()}else void 0!==
d.groupErrors&&null!==d.groupErrors&&I(d,b,g)}x(b,g,a.valid);w(this.element)}else delete k[this.timeStamp]}catch(l){k[this.timeStamp].options.button&&k[this.timeStamp].options.button.prop("disabled",!1)}}function w(a){var b=a.data("vts");if(k[b]){k[b].options.form||c(k[b].options.input);a=0;for(var d=k[b].inputArray,b=k[b].options,g=0,f=d.length;g<f;g++)for(var e in d[g].rules){if("waiting"===d[g].rules[e])return;!1===d[g].rules[e]&&a++}delete k[b.time];b.button&&b.button.prop("disabled",!1);b.groupErrors&&
b.form.hasClass("highlightErrors")&&c.each(d,function(a,b){c.each(b.rules,function(a,d){!1===d&&(c(b.element).on("focus",function(){c("[id='formGrp"+b.element.data("vid")+a+"']").addClass("groupHighlight")}),c(b.element).on("blur",function(){c("[id='formGrp"+b.element.data("vid")+a+"']").removeClass("groupHighlight")}))})});c(document).trigger("validated",[{type:void 0===b.form?"input validation":"form validation",element:void 0!==b.form?b.form[0].id:b.input[0].id,succeeded:0===a,event:b.event}]);
0===a&&null!==b.success?(e=[window].concat(b.success.split(".")).reduce(function(a,b){return"function"===typeof a?a()[b]:a[b]}),"function"===typeof e&&e.call(b.form?b.form[0]:b.input[0])):0===a&&null!==b.event&&null!==b.event.currentTarget&&void 0===b.input?(b.event.preventDefault(),b.form[0].submit()):0!==a&&null!==b.event&&null!==b.event.currentTarget&&b.event.preventDefault()}}function I(a,b,d){c("#"+b.data("vid")+"error"+d.replace(/(:|\.|\[|\]|,)/g,"\\$1")).each(function(f,e){var g=c(b).data("errorprefix");
void 0!==g&&c(e).html(g+": "+c(e).html());g="<span class='errorSpan' id='formGrp"+b.data("vid")+d+"' data-parentinput='"+b.data("vid")+"'>"+c(e).html()+"</span>";J(a,b.data("vid"),g,d);c(e).remove()});var g=c("#"+a.groupErrors);g.hasClass("showGroupedErrors")||g.removeClass("hideGroupedErrors").addClass("showGroupedErrors")}function J(a,b,d,g){var f=c("#"+a.groupErrors).find("[id^='formGrp"+b+"']");if(0<f.length)c(d).insertBefore(f[0]),c("</br>").insertAfter(c("#formGrp"+b+g.replace(/(:|\.|\[|\]|,)/g,
"\\$1")));else{var f=a.form.find("input"),e=f.filter(function(){return c(this).data("vid")===b?c(this):!1}),e=f.index(e);if(e<f.length-1)for(e+=1;e<f.length;e++){var h=c("#"+a.groupErrors).children("[data-parentinput='"+c(f[e]).data("vid")+"']");if(0<h.length){c(d).insertBefore(h);c("</br>").insertAfter(c("#formGrp"+b+g.replace(/(:|\.|\[|\]|,)/g,"\\$1")));return}}c("#"+a.groupErrors).append(d).append("</br>")}}function H(a,b,d,g,f,e){K(a,b,d,g,f,e);var h=c("#"+a.data("vid")+"error"+g.replace(/(:|\.|\[|\]|,)/g,
"\\$1"));0<a.prevUntil("input").filter(".helptext:first").length&&a.prevUntil("input").filter(".helptext:first").addClass("hideMessage").removeClass("showMessage");d.display?L(d,a,h,f,e):d.display||null!==d.modalId?d.display||null===d.modalId||M(d.modalId,a,f,e,h):c(window).scroll(function(){p(a,f,e,h)})}function K(a,b,d,g,f,e){var h=m(a);h.addClass("invalid");g=a.data("vid")+"error"+g;1>c("#"+g).length&&(h.parent().append("<div id='"+g+"' data-parentinput='"+a.data("vid")+"'></div>"),h=c("#"+g.replace(/(:|\.|\[|\]|,)/g,
"\\$1")),h.addClass("errorMessage"),h.html(void 0===b.message?"Validation Error":b.message).css("width",void 0===b.width?"":b.width),p(a,f,e,h),d.display?h.addClass("hideMessage").removeClass("showMessage"):h.addClass("showMessage").removeClass("hideMessage"))}function u(a,b,d,g,f){var e,h,k=void 0===b.data("location")?"right":b.data("location");e=parseInt(b.data("offsetwidth"))||0;h=parseInt(b.data("offsetheight"))||0;switch(k){case "right":return[a.left+m(b).width()+d+e+8-c(window).scrollLeft(),
a.top-c(window).scrollTop()-h];case "left":return[a.left-f.width()-d-e-8-c(window).scrollLeft(),a.top-c(window).scrollTop()-h];case "top":return[a.left+e-c(window).scrollLeft(),a.top-c(window).scrollTop()-5-f.height()-g-h];case "bottom":return[a.left+e-c(window).scrollLeft(),a.top-c(window).scrollTop()+m(b)[0].clientHeight+8+g+h]}}function D(a){c("[id^='"+a.data("vid")+"']").each(function(a,d){c(d).remove()})}function p(a,b,d,c){a=u(m(a).offset(),a,b,d,c);c.addClass("showMessage").removeClass("hideMessage").css("top",
a[1]).css("left",a[0])}function L(a,b,d,c,f){var e=m(b);e.bind("mouseover",function(){null!==a.modalId?q(a.modalId,b,c,f,d)&&p(b,c,f,d):p(b,c,f,d)});e.bind("mouseout",function(){d.addClass("hideMessage").removeClass("showMessage")})}function q(a,b,d,g,f){b=u(m(b).offset(),b,d,g,f);g=c("#"+a);var e=g.offset();a=e.top-c(window).scrollTop();d=a+g.height();e=e.left-c(window).scrollLeft();g=e+g.width();return a>b[1]||d<b[1]||e>b[0]||g<b[0]+f.width()?!1:!0}function M(a,b,d,g,f){q(a,b,d,g,f)||f.addClass("hideMessage").removeClass("showMessage");
c("#"+a).on("scroll",function(){q(a,b,d,g,f)?(p(b,d,g,f),f.removeClass("hideMessage").addClass("showMessage")):f.addClass("hideMessage").removeClass("showMessage")});c(window).scroll(function(){q(a,b,d,g,f)?(p(b,d,g,f),f.removeClass("hideMessage").addClass("showMessage")):f.addClass("hideMessage").removeClass("showMessage")})}function C(a){var b=0,d=0;c("[id^='"+a.data("vid")+"error']").each(function(a,f){b+=c(f).width()+5;d+=c(f).height()+5});return{width:b,height:d}}function m(a){var b=void 0===
a.data("displayon")?null:a.data("displayon"),d,g;if(null!==b){d=b.split(",");b=d[0];g=d[1];if(1===c(b).length)return c(b);var f="up"===d[1]?":last":":first";if(0===("up"===g?a.prevAll(b+":first"):a.nextAll(b+":first")).length)for(d=a.parent();0!==d.length;){if(d.hasClass(b.substring(1,b.length)))return d;for(var e="up"===g?d.prev():d.next();0!==e.length;){if(e.hasClass(b.substring(1,b.length)))return e;var h=e.find(b+f);if(0!==h.length)return h;e="up"===g?e.prev():e.next()}d=d.parent()}else return"up"===
d[1]?a.prevAll(b+":first"):a.nextAll(b+":first")}return a}function N(a,b){var d=a.prevUntil("input").filter(".helptext:first"),g=m(a).offset(),f=C(a);d.addClass("showMessage").removeClass("hideMessage");var e=u(g,a,0,0,d);d.css("top",e[1]).css("left",e[0]);a.data("htid",(new Date).getTime());null!==b&&(c(document).on("helpTextModalScroll"+a.data("htid"),function(){var c=f.width,e=f.height;!q(b,a,c,e,d)||a.hasClass("invalid")?d.addClass("hideMessage").removeClass("showMessage"):(d.addClass("showMessage").removeClass("hideMessage"),
p(a,c,e,d))}),c("#"+b).on("scroll",function(){c(document).trigger("helpTextModalScroll"+a.data("htid"),[{}])}));c(document).on("helpTextScroll"+a.data("htid"),function(){var b=u(g,a,f.width,f.height,d);d.css("top",b[1]).css("left",b[0])});c(window).on("scroll",function(){c(document).trigger("helpTextScroll"+a.data("htid"),[{}])})}function O(a,b,d){c.each(b.split(","),function(b,c){var e=n[c];if("function"===typeof e&&!e.call(a,d))return d.preventDefault(),!1})}function v(a,b){var d={display:a.hasClass("hover"),
success:a.data("formaction")||a.data("inputaction")||null,modalId:a.data("modalid")||null,group:!1===a.hasClass("groupByInput")?a.parents(".formValidate:first").hasClass("groupByInput"):a.hasClass("groupByInput"),time:(new Date).getTime(),event:b};"INPUT"===a[0].tagName?d.input=a:(d.form=a,d.groupErrors=a.data("grouperrors")||null,d.callBefore=a.data("beforevalidate")||!1,d.button=a.find(".validate")||b.currentTarget);return d}function F(a,b,d,c,f){return{done:G,customFunction:d,functionName:a,element:c,
validate:f,timeStamp:b}}var k={};c(document).on("click","input, button",function(a){var b=c(a.currentTarget),d=b.parents(".formValidate:first");0<d.length&&b.hasClass("validate")&&(a=v(d,a),k[a.time]={options:a},B(d,a))});c(document).on("keypress","input",function(a){var b=c(a.currentTarget);void 0!=b.data("inputtype")&&O(b,b.data("inputtype"),a)});c(document).on("focus","input",function(a){var b=c(a.currentTarget);if(!b.hasClass("invalid")&&0<b.prevUntil("input").filter(".helptext:first").length&&
1>c("[id^='"+b.data("vid")+"error']").length&&1>c("#"+b[0].id+"InputGrp").length){var d=b.parents(".formValidate:first").data("modalid")||b.parents(".inputValidate:first").data("modalid")||b.data("modalid")||null;N(b,d);b.one("blur",function(a){b.prevUntil("input").filter(".helptext:first").addClass("hideMessage").removeClass("showMessage");null!==d&&c(document).off("helpTextModalScroll"+b.data("htid"));c(document).off("helpTextScroll"+b.data("htid"))})}});y(["input"]);var n={inputTypeTester:function(a,
b){for(var d=b.charCode?b.charCode:b.keyCode,g=0,f=a.length;g<f;g++)if(c.isArray(a[g])){if(d>a[g][0]&&d<a[g][1])return!0}else if(d===a[g])return!0;return!1},numeric:function(a){return n.inputTypeTester([8,[43,47],[47,58]],a)},integer:function(a){return n.inputTypeTester([8,45,[47,58]],a)},positiveInt:function(a){return n.inputTypeTester([8,[47,58]],a)},nonNumeric:function(a){return n.inputTypeTester([[-1,48],[57,128]],a)},alphaNumeric:function(a){return n.inputTypeTester([8,[47,58],[64,91],[96,123]],
a)},nonAlphaNumeric:function(a){return n.inputTypeTester([[-1,48],[57,65],[90,97],[122,128]],a)},shortDate:function(a){return n.inputTypeTester([8,[44,58]],a)},longDate:function(a){return n.inputTypeTester([8,32,44,46,[47,58],[64,91],[96,123]],a)}},l={requiredInput:function(a,b){var d=/^\s*$/.test(c(this).val());1>c(this).val().length||d||""===c(this).val()?(a.failedRequired=!0,b(!1,"Required field.",100)):b(!0)},requiredGroup:function(a,b){c(this).attr("name")?void 0===c("input[name="+c(this).attr("name")+
"]:checked").val()?(a.failedRequired=!0,b(!1,"You must select an option.",175)):b(!0):c(this).data("checkboxgroup")?1>c("input[data-checkboxgroup="+c(this).data("checkboxgroup")+"]:checked").length?(a.failedRequired=!0,b(!1,"You must select an option.",175)):b(!0):b(!1,"This input has no identifying attribute.")},testMinValue:function(a){var b=c(this).data("min");parseInt(b)>parseInt(c(this).val())?a(!1,"Minimum allowed value: "+b,175):parseInt(c(this).val())?a(!0):a(!1,"The value entered is not a number.",
200)},testMaxValue:function(a){var b=c(this).data("max");parseInt(b)<parseInt(c(this).val())?a(!1,"Maximum allowed value: "+b,175):parseInt(c(this).val())?a(!0):a(!1,"The value entered is not a number.",200)},maxChecked:function(a){var b=c(this).data("maxchecked");if(c(this).data("checkboxgroup")){var d=c(this).data("checkboxgroup");c("input[data-checkboxgroup="+d+"]:checked").length>b?a(!1,"You cannot select more than "+b+" option(s).",250):a(!0)}else a(!0)},minChecked:function(a){var b=c(this).data("minchecked");
if(c(this).data("checkboxgroup")){var d=c(this).data("checkboxgroup");c("input[data-checkboxgroup="+d+"]:checked").length<b?a(!1,"You must select at least "+b+" option(s).",250):a(!0)}else a(!0)},verifyMatch:function(a){var b=c("#"+c(this).data("matchfield"));c(this).val()===b.val()?a(!0):a(!1,"Passwords must match.",200)},email:function(a){a(l.regexTester(c(this),/^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+.[A-Za-z]{2,4}$/),"Not a valid email format.",200)},ssn:function(a){a(l.regexTester(c(this),/^(?!000)([0-6]\d{2}|7([0-6]\d|7[012]))([ -]?)(?!00)\d\d\3(?!0000)\d{4}$/),
"Not a valid social security number.",200)},uscurrency:function(a){a(l.regexTester(c(this),/^(\$|)([1-9]\d{0,2}(\,\d{3})*|([1-9]\d*))(\.\d{2})?$/),"Not a valid amount.",200)},phone:function(a){a(l.regexTester(c(this),/^\D?(\d{3})\D?\D?(\d{3})\D?(\d{4})$/),"Not a valid phone number.",200)},numeric:function(a){a(l.regexTester(c(this),/\/[0-9]|\.\//),"Only digits are allowed.",200)},zip:function(a){a(l.regexTester(c(this),/^\d{5}$/),"Not a valid zip code.",200)},date:function(a){a(l.regexTester(c(this),
/^(?:(?:(?:0?[13578]|1[02])(\/|-|\.)31)\1|(?:(?:0?[1,3-9]|1[0-2])(\/|-|\.)(?:29|30)\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:0?2(\/|-|\.)29\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:(?:0?[1-9])|(?:1[0-2]))(\/|-|\.)(?:0?[1-9]|1\d|2[0-8])\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/),"Not a valid date.",200)},url:function(a){a(l.regexTester(c(this),/^(http|https|ftp)\:\/\/[a-zA-Z0-9\-\.]+\.[a-zA-Z]{2,3}(:[a-zA-Z0-9]*)?\/?([a-zA-Z0-9\-\._\?\,\'/\\+&amp;%\$#\=~])*$/),
"Not a valid url.",200)},password:function(a){a(l.regexTester(c(this),/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,40}$/),"Password must be at least 8 characters and include both upper and lower case letters and a number.",300)},regexTester:function(a,b){var c=b.test(a.val());return""===a.val()||c?!0:c}};return{setAdditionalEvents:y,validate:function(a){if(void 0!==a){a=c(a);try{var b=v(a,null);k[b.time]={options:b};B(a,b)}catch(d){a.find(".validate").prop("disabled",!1)}}},validateForm:r,removeErrors:function(a){a=
void 0===a?c("body"):c(a);a.find("input").each(function(a,d){c("[id^='"+c(d).data("vid")+"error']").remove();c("[id^='"+c(d).data("vid")+"InputGrp']").remove()});c("[id^='"+a.data("vid")+"']").each(function(a,c){c.remove()});a.find(".errorMessage").each(function(a,c){c.remove()});a.find(".invalid").each(function(a,d){c(d).removeClass("invalid")});a.find(".showGroupedErrors").each(function(a,d){c(d).empty().removeClass("showGroupedErrors").addClass("hideGroupedErrors")})},validationRules:l}}(jQuery);
